<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="/static/css/main.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    </head>
    <body>
        <div id="header">
        <?php
            echo '[<a href="/">home</a>]&nbsp;<b>' . htmlentities($question['text']) . '</b><br/>';
        ?>
        by <b><?=htmlentities($question['created_by'])?></b>
        </div>
        <div id="body" class="form-check">
            <form action="/vote" method="post">
                <input type="hidden" name="question" value="<?=$question['id']?>"/>
                <ul>
            <?php
            foreach ($answers as $a) {
                echo '<li>';
                if (array_key_exists('email', $_SESSION)) {
                    printf(
                        '<input class="form-check-input" type="radio" name="answer" value="%s" %s />',
                        htmlentities($a['id']),
                        $a['voted'] ? 'checked' : '',
                    );
                }
                printf(
                    '%s&nbsp;|&nbsp;%d&nbsp;[%f%%]',
                    htmlentities($a['text']),
                    $a['cnt'],
                    $a['pct']
                );
                echo '</li>';
            }
            ?>
                </ul>
            <?php
            if ($is_login) {
            ?>
                <input type="submit" value="Vote for ..." />
            <?php
            }
            ?>
            </form>
            <?php
            if ($is_owner) {
            ?>
            <form method="post">
                <input type="text" name="answer" placeholder="Additional answer ..." />
                <input type="submit" value="Add answer"/>
            </form>
            <?php
            }
            ?>
        </div>
    </body>
</html>