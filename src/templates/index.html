<html>
    <head>
        <script
            src="https://apis.google.com/js/platform.js"
            async
            defer
        ></script>
        <meta
            name="google-signin-client_id"
            content="555908440075-9h7iblic3pk981qiscpppdqp9p8oj7jj.apps.googleusercontent.com"
        />
        <!-- <script src="https://unpkg.com/htmx.org@1.9.11" integrity="sha384-0gxUXCCR8yv9FM2b+U3FDbsKthCI66oH5IA9fHppQq9DDMHuMauqq1ZHBpJxQ0J0" crossorigin="anonymous"></script>
        <script src="https://unpkg.com/htmx.org@1.9.11/dist/ext/json-enc.js"></script> -->
        <script>
            function onSignIn(googleUser) {
                var profile = googleUser.getBasicProfile();
                console.log("ID: " + profile.getId()); // Do not send to your backend! Use an ID token instead.
                console.log("Name: " + profile.getName());
                console.log("Image URL: " + profile.getImageUrl());
                console.log("Email: " + profile.getEmail()); // This is null if the 'email' scope is not present.
            }
        </script>
        <link rel="stylesheet" href="/static/css/main.css">
    </head>
    <body>
        <div id="header">
        <?php
            if (array_key_exists('email', $_SESSION)) {
                printf('<b>%s</b><br/>', htmlentities($_SESSION['email']));
                printf('<a href="%s">Logout</a><br/><br/>', $url['logout']);
        ?>
        <form id="create-question" method="post" action="/q">
            Create question<br/>
            <input type="text" name="q" placeholder="Question?" required />
            <input type="submit" />
        </form>
        <?php
            } else {
        ?>
            <div class="login">
                <div class="g-signin2" data-onsuccess="onSignIn"></div>
        <?php
                printf('&nbsp;or <a href="%s">login here</a>', $url['login']);
            }
        ?>
            </div>
        </div>
        <div id="body">
            <ul>
        <?php
        foreach ($questions as $q) {
            printf('<li><a href="/q/%s">%s</a></li>', $q['id'], htmlentities($q['text']));
        }
        ?>
            </ul>
        </div>
    </body>
</html>
